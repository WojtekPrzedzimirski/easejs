#!/bin/bash
#
# Simple version update script
##

major="$1"
minor="$2"
rev="$3"
suffix="$4"

# pre-formatted suffix
fsuffix=
[ -n "$suffix" ] && fsuffix="-$suffix"

# generate version.js
cat version.js.tpl | sed "
  s/@MAJOR@/$major/;
  s/@MINOR@/$minor/;
  s/@REV@/$rev/;
  s/@SUFFIX@/$suffix/;
" > ../lib/version.js

# output version for docs
cat - > ../doc/version.texi <<EOF
@c DO NOT MODIFY; generated by verset (not autoconf)
@set VERSION $major.$minor.$rev$fsuffix
EOF
